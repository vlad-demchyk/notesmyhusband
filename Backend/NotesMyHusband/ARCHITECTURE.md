# –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Ç–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó Network Notebook API

## üìã –ó–º—ñ—Å—Ç
1. [–ó–∞–≥–∞–ª—å–Ω–∏–π –æ–≥–ª—è–¥](#–∑–∞–≥–∞–ª—å–Ω–∏–π-–æ–≥–ª—è–¥)
2. [–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó](#—Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó)
3. [–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º–∏](#–∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º–∏)
4. [–Ø–∫ –ø—Ä–∞—Ü—é—î GraphQL](#—è–∫-–ø—Ä–∞—Ü—é—î-graphql)
5. [–ü–æ—Ç—ñ–∫ –∑–∞–ø–∏—Ç—ñ–≤](#–ø–æ—Ç—ñ–∫-–∑–∞–ø–∏—Ç—ñ–≤)
6. [–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö](#–±–∞–∑–∞-–¥–∞–Ω–∏—Ö)
7. [–ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è](#–∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è)

---

## üéØ –ó–∞–≥–∞–ª—å–Ω–∏–π –æ–≥–ª—è–¥

–¶–µ REST-like API, –∞–ª–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **GraphQL** –∑–∞–º—ñ—Å—Ç—å —Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω–∏—Ö REST endpoints. GraphQL –¥–æ–∑–≤–æ–ª—è—î –∫–ª—ñ—î–Ω—Ç—É –∑–∞–ø–∏—Ç—É–≤–∞—Ç–∏ —Å–∞–º–µ —Ç—ñ –¥–∞–Ω—ñ, —è–∫—ñ –ø–æ—Ç—Ä—ñ–±–Ω—ñ, –≤ –æ–¥–Ω–æ–º—É –∑–∞–ø–∏—Ç—ñ.

**–û—Å–Ω–æ–≤–Ω–∞ —ñ–¥–µ—è:** –ö–ª—ñ—î–Ω—Ç (Vue.js —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥) –Ω–∞–¥—Å–∏–ª–∞—î GraphQL –∑–∞–ø–∏—Ç–∏ –Ω–∞ PHP —Å–µ—Ä–≤–µ—Ä, —è–∫–∏–π –æ–±—Ä–æ–±–ª—è—î —ó—Ö, –≤–∑–∞—î–º–æ–¥—ñ—î –∑ SQLite –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö —Ç–∞ –ø–æ–≤–µ—Ä—Ç–∞—î JSON –≤—ñ–¥–ø–æ–≤—ñ–¥—å.

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

### 1. **PHP 7.4+**
- –°–µ—Ä–≤–µ—Ä–Ω–∞ –º–æ–≤–∞ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è
- –û–±—Ä–æ–±–ª—è—î HTTP –∑–∞–ø–∏—Ç–∏
- –í–∏–∫–æ–Ω—É—î –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫—É

### 2. **GraphQL** (–±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ `webonyx/graphql-php`)
- **–©–æ —Ü–µ?** –ú–æ–≤–∞ –∑–∞–ø–∏—Ç—ñ–≤ –¥–ª—è API
- **–ù–∞–≤—ñ—â–æ?** –î–æ–∑–≤–æ–ª—è—î –∫–ª—ñ—î–Ω—Ç—É –∑–∞–ø–∏—Ç—É–≤–∞—Ç–∏ —Å–∞–º–µ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –¥–∞–Ω—ñ
- **–ü–µ—Ä–µ–≤–∞–≥–∏:**
  - –û–¥–∏–Ω endpoint –∑–∞–º—ñ—Å—Ç—å –±–∞–≥–∞—Ç—å–æ—Ö REST endpoints
  - –ö–ª—ñ—î–Ω—Ç —Å–∞–º –≤–∏–∑–Ω–∞—á–∞—î —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
  - –ú–µ–Ω—à–µ –Ω–∞–¥–ª–∏—à–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö

**–ü—Ä–∏–∫–ª–∞–¥:**
```graphql
# –ö–ª—ñ—î–Ω—Ç –∑–∞–ø–∏—Ç—É—î —Ç—ñ–ª—å–∫–∏ —Ç–µ, —â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ
query {
  me {
    id
    login
  }
  receivedNotes {
    id
    content
    author {
      login
    }
  }
}
```

### 3. **SQLite**
- **–©–æ —Ü–µ?** –õ–µ–≥–∫–∞ —Ñ–∞–π–ª–æ–≤–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö
- **–ù–∞–≤—ñ—â–æ?** –ù–µ –ø–æ—Ç—Ä–µ–±—É—î –æ–∫—Ä–µ–º–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –ë–î, –≤—Å–µ –≤ –æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—ñ
- **–ü–µ—Ä–µ–≤–∞–≥–∏:**
  - –ü—Ä–æ—Å—Ç–æ—Ç–∞ (–æ–¥–∏–Ω —Ñ–∞–π–ª `notebook.db`)
  - –®–≤–∏–¥–∫—ñ—Å—Ç—å –¥–ª—è –º–∞–ª–∏—Ö/—Å–µ—Ä–µ–¥–Ω—ñ—Ö –ø—Ä–æ–µ–∫—Ç—ñ–≤
  - –ù–µ –ø–æ—Ç—Ä–µ–±—É—î –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### 4. **JWT (JSON Web Tokens)** (–±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ `firebase/php-jwt`)
- **–©–æ —Ü–µ?** –¢–æ–∫–µ–Ω–∏ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- **–ù–∞–≤—ñ—â–æ?** –ë–µ–∑–ø–µ—á–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- **–Ø–∫ –ø—Ä–∞—Ü—é—î:**
  1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –ª–æ–≥—ñ–Ω—É—î—Ç—å—Å—è ‚Üí –æ—Ç—Ä–∏–º—É—î —Ç–æ–∫–µ–Ω
  2. –¢–æ–∫–µ–Ω –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ
  3. –ö–æ–∂–µ–Ω –∑–∞–ø–∏—Ç –º—ñ—Å—Ç–∏—Ç—å —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫—É `Authorization: Bearer TOKEN`
  4. –°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Ç–æ–∫–µ–Ω ‚Üí –¥—ñ–∑–Ω–∞—î—Ç—å—Å—è —Ö—Ç–æ —Ä–æ–±–∏—Ç—å –∑–∞–ø–∏—Ç

### 5. **PDO (PHP Data Objects)**
- –í–±—É–¥–æ–≤–∞–Ω–∞ PHP –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –±–∞–∑–∞–º–∏ –¥–∞–Ω–∏—Ö
- –ë–µ–∑–ø–µ—á–Ω—ñ –ø—ñ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ñ –∑–∞–ø–∏—Ç–∏ (–∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ SQL —ñ–Ω'—î–∫—Ü—ñ–π)

### 6. **Composer**
- –ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è PHP
- –í—Å—Ç–∞–Ω–æ–≤–ª—é—î –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ (GraphQL, JWT)
- –ê–≤—Ç–æ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–ª–∞—Å—ñ–≤ —á–µ—Ä–µ–∑ PSR-4

---

## üèó –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Vue.js Frontend ‚îÇ
‚îÇ   (–∫–ª—ñ—î–Ω—Ç)      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ HTTP POST
         ‚îÇ GraphQL Query
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  api/graphql/index.php   ‚îÇ  ‚Üê –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É (Entry Point)
‚îÇ  (GraphQL Endpoint)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ‚îÄ‚îÄ‚ñ∫ –°—Ç–≤–æ—Ä—é—î GraphQL Schema
         ‚îÇ     (Types::query(), Types::mutation())
         ‚îÇ
         ‚îú‚îÄ‚îÄ‚îÄ‚ñ∫ –í–∏–∫–æ–Ω—É—î –∑–∞–ø–∏—Ç —á–µ—Ä–µ–∑ GraphQL::executeQuery()
         ‚îÇ
         ‚îú‚îÄ‚îÄ‚îÄ‚ñ∫ –í–∏–∫–ª–∏–∫–∞—î Resolvers (resolvers.php)
         ‚îÇ     ‚îÇ
         ‚îÇ     ‚îú‚îÄ‚îÄ‚îÄ‚ñ∫ Auth::getCurrentUser()  ‚Üê –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–æ–∫–µ–Ω—É
         ‚îÇ     ‚îÇ
         ‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚ñ∫ Database::getInstance()  ‚Üê –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –ë–î
         ‚îÇ           ‚îÇ
         ‚îÇ           ‚îî‚îÄ‚îÄ‚îÄ‚ñ∫ SQLite (notebook.db)
         ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚ñ∫ –ü–æ–≤–µ—Ä—Ç–∞—î JSON –≤—ñ–¥–ø–æ–≤—ñ–¥—å
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:

#### 1. **Entry Point** (`api/graphql/index.php`)
- –û—Ç—Ä–∏–º—É—î HTTP –∑–∞–ø–∏—Ç
- –ü–∞—Ä—Å–∏—Ç—å GraphQL –∑–∞–ø–∏—Ç –∑ JSON
- –°—Ç–≤–æ—Ä—é—î GraphQL —Å—Ö–µ–º—É
- –í–∏–∫–æ–Ω—É—î –∑–∞–ø–∏—Ç
- –ü–æ–≤–µ—Ä—Ç–∞—î JSON –≤—ñ–¥–ø–æ–≤—ñ–¥—å

#### 2. **Types** (`api/graphql/types.php`)
- –í–∏–∑–Ω–∞—á–∞—î —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–∏—Ö (User, Note, etc.)
- –í–∏–∑–Ω–∞—á–∞—î —è–∫—ñ –∑–∞–ø–∏—Ç–∏ (Queries) —Ç–∞ –º—É—Ç–∞—Ü—ñ—ó (Mutations) –¥–æ—Å—Ç—É–ø–Ω—ñ
- –ó–≤'—è–∑—É—î –ø–æ–ª—è –∑ —Ñ—É–Ω–∫—Ü—ñ—è–º–∏-—Ä–µ–∑–æ–ª–≤–µ—Ä–∞–º–∏

#### 3. **Resolvers** (`api/graphql/resolvers.php`)
- –ú—ñ—Å—Ç–∏—Ç—å –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫—É
- –í–∑–∞—î–º–æ–¥—ñ—î –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É
- –ü–æ–≤–µ—Ä—Ç–∞—î –¥–∞–Ω—ñ

#### 4. **Database** (`api/database/db.php`)
- Singleton –ø–∞—Ç—Ç–µ—Ä–Ω (–æ–¥–∏–Ω –µ–∫–∑–µ–º–ø–ª—è—Ä –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è)
- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ SQLite —á–µ—Ä–µ–∑ PDO
- –ó–∞–±–µ–∑–ø–µ—á—É—î —î–¥–∏–Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –Ω–∞ –≤–µ—Å—å –∑–∞–ø–∏—Ç

#### 5. **Auth** (`api/auth/auth.php`)
- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è JWT —Ç–æ–∫–µ–Ω—ñ–≤
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–æ–∫–µ–Ω—ñ–≤
- –•–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤ (bcrypt)
- –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

---

## üîÑ –Ø–∫ –ø—Ä–∞—Ü—é—î GraphQL

### –ö–æ–Ω—Ü–µ–ø—Ü—ñ—è:

**REST API:**
```
GET /api/users/1          ‚Üí –û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
GET /api/users/1/notes   ‚Üí –û—Ç—Ä–∏–º–∞—Ç–∏ –Ω–æ—Ç–∞—Ç–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
GET /api/notes/1          ‚Üí –û—Ç—Ä–∏–º–∞—Ç–∏ –Ω–æ—Ç–∞—Ç–∫—É
```
‚Üí 3 –æ–∫—Ä–µ–º–∏—Ö HTTP –∑–∞–ø–∏—Ç–∏

**GraphQL API:**
```graphql
query {
  user(id: 1) {
    login
    notes {
      id
      content
    }
  }
}
```
‚Üí 1 HTTP –∑–∞–ø–∏—Ç, –æ—Ç—Ä–∏–º—É—î–º–æ –≤—Å–µ —â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ GraphQL –∑–∞–ø–∏—Ç—É:

```graphql
query GetUser {           # –ù–∞–∑–≤–∞ –æ–ø–µ—Ä–∞—Ü—ñ—ó (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
  me {                    # Query (—á–∏—Ç–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö)
    id                     # –ü–æ–ª–µ
    login                  # –ü–æ–ª–µ
    myNotes {              # –í–∫–ª–∞–¥–µ–Ω–µ –ø–æ–ª–µ
      id
      content
    }
  }
}
```

```graphql
mutation CreateNote {     # Mutation (–∑–º—ñ–Ω–∞ –¥–∞–Ω–∏—Ö)
  createNote(
    content: "–ü—Ä–∏–≤—ñ—Ç!"
    recipient_ids: [2, 3]
  ) {
    id                     # –©–æ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –ø—ñ—Å–ª—è –º—É—Ç–∞—Ü—ñ—ó
    content
  }
}
```

### –¢–∏–ø–∏ –≤ GraphQL:

1. **Query** - —á–∏—Ç–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö (GET –≤ REST)
   - `me` - –ø–æ—Ç–æ—á–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á
   - `users` - —Å–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
   - `myNotes` - –º–æ—ó –Ω–æ—Ç–∞—Ç–∫–∏
   - `receivedNotes` - –æ—Ç—Ä–∏–º–∞–Ω—ñ –Ω–æ—Ç–∞—Ç–∫–∏

2. **Mutation** - –∑–º—ñ–Ω–∞ –¥–∞–Ω–∏—Ö (POST/PUT/DELETE –≤ REST)
   - `register` - —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è
   - `login` - –≤—Ö—ñ–¥
   - `createNote` - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ—Ç–∞—Ç–∫–∏
   - `updateNote` - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –Ω–æ—Ç–∞—Ç–∫–∏
   - `deleteNote` - –≤–∏–¥–∞–ª–µ–Ω–Ω—è –Ω–æ—Ç–∞—Ç–∫–∏

3. **Types** - —Ç–∏–ø–∏ –¥–∞–Ω–∏—Ö
   - `User` - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á
   - `Note` - –Ω–æ—Ç–∞—Ç–∫–∞
   - `AuthPayload` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

---

## üìä –ü–æ—Ç—ñ–∫ –∑–∞–ø–∏—Ç—ñ–≤

### –ü—Ä–∏–∫–ª–∞–¥: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ—Ç–∞—Ç–∫–∏

```
1. –ö–ª—ñ—î–Ω—Ç (Vue.js)
   ‚Üì
   –ù–∞–¥—Å–∏–ª–∞—î POST –∑–∞–ø–∏—Ç:
   POST /api/graphql/index.php
   Headers: {
     "Content-Type": "application/json",
     "Authorization": "Bearer eyJ0eXAiOiJKV1QiLCJhbGc..."
   }
   Body: {
     "query": "mutation { createNote(content: \"–ü—Ä–∏–≤—ñ—Ç!\", recipient_ids: [2]) { id content } }"
   }

2. api/graphql/index.php
   ‚Üì
   - –û—Ç—Ä–∏–º—É—î –∑–∞–ø–∏—Ç
   - –ü–∞—Ä—Å–∏—Ç—å JSON
   - –í–∏—Ç—è–≥—É—î GraphQL query —Ç–∞ —Ç–æ–∫–µ–Ω

3. –°—Ç–≤–æ—Ä—é—î GraphQL Schema
   ‚Üì
   Schema {
     query: Types::query(),
     mutation: Types::mutation()
   }

4. –í–∏–∫–ª–∏–∫–∞—î GraphQL::executeQuery()
   ‚Üì
   GraphQL –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –º—É—Ç–∞—Ü—ñ—é "createNote"
   ‚Üì
   –í–∏–∫–ª–∏–∫–∞—î resolver: Resolvers::createNote()

5. Resolvers::createNote()
   ‚Üì
   a) Auth::getCurrentUser() - –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Ç–æ–∫–µ–Ω
      ‚Üí –û—Ç—Ä–∏–º—É—î user_id –∑ —Ç–æ–∫–µ–Ω—É
   ‚Üì
   b) Database::getInstance() - –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è –¥–æ –ë–î
   ‚Üì
   c) –í–∏–∫–æ–Ω—É—î SQL:
      INSERT INTO notes (author_id, content) VALUES (?, ?)
      INSERT INTO note_recipients (note_id, recipient_id) VALUES (?, ?)
   ‚Üì
   d) –ü–æ–≤–µ—Ä—Ç–∞—î —Å—Ç–≤–æ—Ä–µ–Ω—É –Ω–æ—Ç–∞—Ç–∫—É

6. GraphQL –æ–±—Ä–æ–±–ª—è—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç
   ‚Üì
   –§–æ—Ä–º—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å –∑–≥—ñ–¥–Ω–æ –∑–∞–ø–∏—Ç—É:
   {
     "data": {
       "createNote": {
         "id": 1,
         "content": "–ü—Ä–∏–≤—ñ—Ç!"
       }
     }
   }

7. –ü–æ–≤–µ—Ä—Ç–∞—î JSON –∫–ª—ñ—î–Ω—Ç—É
   ‚Üì
   HTTP 200 OK
   {
     "data": { ... }
   }
```

---

## üóÑ –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

### SQLite - —Ñ–∞–π–ª–æ–≤–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö

**–§–∞–π–ª:** `database/notebook.db`

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- –ù–µ –ø–æ—Ç—Ä–µ–±—É—î –æ–∫—Ä–µ–º–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- –û–¥–∏–Ω —Ñ–∞–π–ª = –≤—Å—è –±–∞–∑–∞ –¥–∞–Ω–∏—Ö
- –®–≤–∏–¥–∫–∞ –¥–ª—è –º–∞–ª–∏—Ö/—Å–µ—Ä–µ–¥–Ω—ñ—Ö –ø—Ä–æ–µ–∫—Ç—ñ–≤
- –õ–µ–≥–∫–æ –∫–æ–ø—ñ—é–≤–∞—Ç–∏/–±–µ–∫–∞–ø–∏—Ç–∏

**–ù–µ–¥–æ–ª—ñ–∫–∏:**
- –û–±–º–µ–∂–µ–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –æ–¥–Ω–æ—á–∞—Å–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤
- –ù–µ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç—ñ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—å:

```sql
users
‚îú‚îÄ‚îÄ id (PRIMARY KEY)
‚îú‚îÄ‚îÄ login (UNIQUE)
‚îú‚îÄ‚îÄ password (hashed)
‚îî‚îÄ‚îÄ created_at

notes
‚îú‚îÄ‚îÄ id (PRIMARY KEY)
‚îú‚îÄ‚îÄ author_id (FOREIGN KEY ‚Üí users.id)
‚îú‚îÄ‚îÄ content
‚îú‚îÄ‚îÄ created_at
‚îî‚îÄ‚îÄ updated_at

note_recipients
‚îú‚îÄ‚îÄ id (PRIMARY KEY)
‚îú‚îÄ‚îÄ note_id (FOREIGN KEY ‚Üí notes.id)
‚îú‚îÄ‚îÄ recipient_id (FOREIGN KEY ‚Üí users.id)
‚îî‚îÄ‚îÄ UNIQUE(note_id, recipient_id)

blocked_users
‚îú‚îÄ‚îÄ id (PRIMARY KEY)
‚îú‚îÄ‚îÄ user_id (FOREIGN KEY ‚Üí users.id)
‚îú‚îÄ‚îÄ blocked_user_id (FOREIGN KEY ‚Üí users.id)
‚îî‚îÄ‚îÄ UNIQUE(user_id, blocked_user_id)

pinned_users
‚îú‚îÄ‚îÄ id (PRIMARY KEY)
‚îú‚îÄ‚îÄ user_id (FOREIGN KEY ‚Üí users.id)
‚îú‚îÄ‚îÄ pinned_user_id (FOREIGN KEY ‚Üí users.id)
‚îî‚îÄ‚îÄ UNIQUE(user_id, pinned_user_id)
```

### –ó–≤'—è–∑–∫–∏:

- **–û–¥–∏–Ω –¥–æ –±–∞–≥–∞—Ç—å–æ—Ö:** User ‚Üí Notes (–æ–¥–∏–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –±–∞–≥–∞—Ç–æ –Ω–æ—Ç–∞—Ç–æ–∫)
- **–ë–∞–≥–∞—Ç–æ –¥–æ –±–∞–≥–∞—Ç—å–æ—Ö:** Notes ‚Üî Users (–Ω–æ—Ç–∞—Ç–∫–∞ –º–æ–∂–µ –º–∞—Ç–∏ –±–∞–≥–∞—Ç—å–æ—Ö –æ—Ç—Ä–∏–º—É–≤–∞—á—ñ–≤)

---

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

### JWT (JSON Web Token)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–æ–∫–µ–Ω—É:**
```
header.payload.signature
```

**–ü—Ä–∏–∫–ª–∞–¥:**
```
eyJ0eXAiOiJKV1QiLCJhbGc...  (header)
.eyJ1c2VyX2lkIjoxLCJsb2dpbiI6InRlc3QifQ...  (payload)
.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c  (signature)
```

### –ü—Ä–æ—Ü–µ—Å:

#### 1. **–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è/–í—Ö—ñ–¥**
```
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á ‚Üí login/register
‚Üì
–°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–≤—ñ—Ä—è—î credentials
‚Üì
–ì–µ–Ω–µ—Ä—É—î JWT —Ç–æ–∫–µ–Ω:
{
  "user_id": 1,
  "login": "user1",
  "iat": 1234567890,  (issued at)
  "exp": 1234567890   (expiration - 7 –¥–Ω—ñ–≤)
}
‚Üì
–ü—ñ–¥–ø–∏—Å—É—î —Å–µ–∫—Ä–µ—Ç–Ω–∏–º –∫–ª—é—á–µ–º
‚Üì
–ü–æ–≤–µ—Ä—Ç–∞—î —Ç–æ–∫–µ–Ω –∫–ª—ñ—î–Ω—Ç—É
```

#### 2. **–ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–æ–≤–∞–Ω–∏–π –∑–∞–ø–∏—Ç**
```
–ö–ª—ñ—î–Ω—Ç ‚Üí POST /api/graphql/index.php
Headers: {
  "Authorization": "Bearer TOKEN"
}
‚Üì
Auth::getCurrentUser()
‚Üì
–í–∏—Ç—è–≥—É—î —Ç–æ–∫–µ–Ω –∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞
‚Üì
JWT::decode() - –ø–µ—Ä–µ–≤—ñ—Ä—è—î –ø—ñ–¥–ø–∏—Å
‚Üì
–ü–µ—Ä–µ–≤—ñ—Ä—è—î exp (—Ç–µ—Ä–º—ñ–Ω –¥—ñ—ó)
‚Üì
–ü–æ–≤–µ—Ä—Ç–∞—î user_id —Ç–∞ login
```

#### 3. **–ë–µ–∑–ø–µ–∫–∞ –ø–∞—Ä–æ–ª—ñ–≤**
- –ü–∞—Ä–æ–ª—ñ —Ö–µ—à—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ `password_hash()` (bcrypt)
- –ù—ñ–∫–æ–ª–∏ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ —á–∏—Å—Ç–æ–º—É –≤–∏–≥–ª—è–¥—ñ
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–µ—Ä–µ–∑ `password_verify()`

---

## üîÑ Singleton Pattern (Database)

**–ü—Ä–æ–±–ª–µ–º–∞:** –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–∞–≥–∞—Ç—å–æ—Ö –ø—ñ–¥–∫–ª—é—á–µ–Ω—å –¥–æ –ë–î –Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ

**–†—ñ—à–µ–Ω–Ω—è:** Singleton - –æ–¥–∏–Ω –µ–∫–∑–µ–º–ø–ª—è—Ä –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

```php
Database::getInstance()  // –ü–µ—Ä—à–∏–π –≤–∏–∫–ª–∏–∫ - —Å—Ç–≤–æ—Ä—é—î –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
Database::getInstance()  // –ù–∞—Å—Ç—É–ø–Ω—ñ –≤–∏–∫–ª–∏–∫–∏ - –ø–æ–≤–µ—Ä—Ç–∞—î —Ç–µ —Å–∞–º–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
```

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- –ï–∫–æ–Ω–æ–º—ñ—è —Ä–µ—Å—É—Ä—Å—ñ–≤
- –®–≤–∏–¥–∫—ñ—Å—Ç—å
- –ö–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è–º

---

## üì¶ Autoloading (PSR-4)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Ç—Ä—ñ–±–Ω–æ –ø—ñ–¥–∫–ª—é—á–∞—Ç–∏ –∫–æ–∂–µ–Ω —Ñ–∞–π–ª –≤—Ä—É—á–Ω—É

**–†—ñ—à–µ–Ω–Ω—è:** Composer autoloader

```php
// composer.json
"autoload": {
  "psr-4": {
    "App\\": "api/"
  }
}

// –¢–µ–ø–µ—Ä –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:
use App\Database\Database;
use App\Auth\Auth;
use App\GraphQL\Resolvers;
```

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**
- `App\Database\Database` ‚Üí `api/Database/Database.php`
- `App\Auth\Auth` ‚Üí `api/Auth/Auth.php`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥–∫–ª—é—á–∞—î —Ñ–∞–π–ª–∏ –ø—Ä–∏ `use`

---

## üéØ –ö–ª—é—á–æ–≤—ñ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó

### 1. **Separation of Concerns**
- **Types** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö
- **Resolvers** - –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞
- **Database** - –¥–æ—Å—Ç—É–ø –¥–æ –¥–∞–Ω–∏—Ö
- **Auth** - –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

### 2. **Dependency Injection**
- Resolvers –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å Database —Ç–∞ Auth
- –õ–µ–≥–∫–æ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —Ç–∞ –∑–∞–º—ñ–Ω—é–≤–∞—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### 3. **Error Handling**
- GraphQL –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ–º–∏–ª–∫–∏ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—ñ `{ "errors": [...] }`
- HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥–∏ (400, 401, 500)

### 4. **CORS (Cross-Origin Resource Sharing)**
```php
header('Access-Control-Allow-Origin: *');
```
–î–æ–∑–≤–æ–ª—è—î Vue.js —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É —Ä–æ–±–∏—Ç–∏ –∑–∞–ø–∏—Ç–∏ –∑ —ñ–Ω—à–æ–≥–æ –¥–æ–º–µ–Ω—É/–ø–æ—Ä—Ç—É

---

## üöÄ –Ø–∫ –≤—Å–µ –ø—Ä–∞—Ü—é—î —Ä–∞–∑–æ–º

1. **–ö–ª—ñ—î–Ω—Ç –Ω–∞–¥—Å–∏–ª–∞—î GraphQL –∑–∞–ø–∏—Ç** ‚Üí HTTP POST –Ω–∞ `/api/graphql/index.php`

2. **index.php** ‚Üí –°—Ç–≤–æ—Ä—é—î —Å—Ö–µ–º—É, –≤–∏–∫–æ–Ω—É—î –∑–∞–ø–∏—Ç

3. **GraphQL** ‚Üí –ó–Ω–∞—Ö–æ–¥–∏—Ç—å –ø–æ—Ç—Ä—ñ–±–Ω–∏–π resolver (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `createNote`)

4. **Resolver** ‚Üí 
   - –ü–µ—Ä–µ–≤—ñ—Ä—è—î –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é (Auth)
   - –ü—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è –¥–æ –ë–î (Database)
   - –í–∏–∫–æ–Ω—É—î SQL –∑–∞–ø–∏—Ç–∏
   - –ü–æ–≤–µ—Ä—Ç–∞—î –¥–∞–Ω—ñ

5. **GraphQL** ‚Üí –§–æ—Ä–º—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å –∑–≥—ñ–¥–Ω–æ –∑–∞–ø–∏—Ç—É –∫–ª—ñ—î–Ω—Ç–∞

6. **index.php** ‚Üí –ü–æ–≤–µ—Ä—Ç–∞—î JSON –≤—ñ–¥–ø–æ–≤—ñ–¥—å

7. **–ö–ª—ñ—î–Ω—Ç** ‚Üí –û—Ç—Ä–∏–º—É—î –¥–∞–Ω—ñ —Ç–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î —ó—Ö

---

## üìù –í–∏—Å–Ω–æ–≤–æ–∫

–°–∏—Å—Ç–µ–º–∞ –ø–æ–±—É–¥–æ–≤–∞–Ω–∞ –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö:
- **–ú–æ–¥—É–ª—å–Ω—ñ—Å—Ç—å** - –∫–æ–∂–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–∞—î —Å–≤–æ—é –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å
- **–ë–µ–∑–ø–µ–∫–∞** - JWT —Ç–æ–∫–µ–Ω–∏, —Ö–µ—à–æ–≤–∞–Ω—ñ –ø–∞—Ä–æ–ª—ñ, SQL injection –∑–∞—Ö–∏—Å—Ç
- **–ì–Ω—É—á–∫—ñ—Å—Ç—å** - GraphQL –¥–æ–∑–≤–æ–ª—è—î –∫–ª—ñ—î–Ω—Ç—É –∑–∞–ø–∏—Ç—É–≤–∞—Ç–∏ —Å–∞–º–µ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –¥–∞–Ω—ñ
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - SQLite –Ω–µ –ø–æ—Ç—Ä–µ–±—É—î –æ–∫—Ä–µ–º–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- **–ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ —Ç–∏–ø–∏ —Ç–∞ –º—É—Ç–∞—Ü—ñ—ó
