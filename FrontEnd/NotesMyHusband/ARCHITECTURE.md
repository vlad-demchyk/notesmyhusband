# –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó —Ç–∞ Apollo Client

## –†–æ–∑–ø–æ–¥—ñ–ª –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç–µ–π

### üì° useAuthActions.ts (API Layer)
**–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å:** –¢—ñ–ª—å–∫–∏ –≤–∏–∫–ª–∏–∫–∏ GraphQL API

**–©–æ —Ä–æ–±–∏—Ç—å:**
- –§–æ—Ä–º—É—î GraphQL –∑–∞–ø–∏—Ç–∏ (mutations/queries)
- –í–∏–∫–ª–∏–∫–∞—î Apollo Client
- –ë–∞–∑–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ (—Ç—ñ–ª—å–∫–∏ –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è)
- –ü–æ–≤–µ—Ä—Ç–∞—î –¥–∞–Ω—ñ –∞–±–æ –≤–∏–∫–∏–¥–∞—î –ø–æ–º–∏–ª–∫–∏

**–©–æ –ù–ï —Ä–æ–±–∏—Ç—å:**
- ‚ùå –ù–µ —É–ø—Ä–∞–≤–ª—è—î —Å—Ç–∞–Ω–æ–º (user, token)
- ‚ùå –ù–µ –∑–±–µ—Ä—ñ–≥–∞—î —Ç–æ–∫–µ–Ω–∏ –≤ localStorage
- ‚ùå –ù–µ –æ–±—Ä–æ–±–ª—è—î –ø–æ–º–∏–ª–∫–∏ –¥–ª—è UI
- ‚ùå –ù–µ —Ñ–æ—Ä–º–∞—Ç—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

**–ü—Ä–∏–∫–ª–∞–¥:**
```typescript
// –ü–æ–≤–µ—Ä—Ç–∞—î –¥–∞–Ω—ñ –∞–±–æ throw Error
const { user, token } = await authActions.login({ login, password })
```

---

### üóÑÔ∏è useAuthStore.ts (State Management Layer)
**–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å:** –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å—Ç–∞–Ω–æ–º —Ç–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü—ñ—è

**–©–æ —Ä–æ–±–∏—Ç—å:**
- –ó–±–µ—Ä—ñ–≥–∞—î —Å—Ç–∞–Ω (user, token, isLoading)
- –í–∏–∫–ª–∏–∫–∞—î actions –∑ useAuthActions
- –û–±—Ä–æ–±–ª—è—î –ø–æ–º–∏–ª–∫–∏ –¥–ª—è UI (—Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å)
- –û–Ω–æ–≤–ª—é—î —Å—Ç–∞–Ω –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
- –ó–±–µ—Ä—ñ–≥–∞—î —Ç–æ–∫–µ–Ω–∏ –≤ localStorage
- –ü–æ–≤–µ—Ä—Ç–∞—î —Ñ–æ—Ä–º–∞—Ç–æ–≤–∞–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤

**–©–æ –ù–ï —Ä–æ–±–∏—Ç—å:**
- ‚ùå –ù–µ —Ñ–æ—Ä–º—É—î GraphQL –∑–∞–ø–∏—Ç–∏
- ‚ùå –ù–µ –≤–∏–∫–ª–∏–∫–∞—î Apollo Client –Ω–∞–ø—Ä—è–º—É
- ‚ùå –ù–µ —Ä–æ–±–∏—Ç—å HTTP –∑–∞–ø–∏—Ç–∏

**–ü—Ä–∏–∫–ª–∞–¥:**
```typescript
// –ü–æ–≤–µ—Ä—Ç–∞—î { success: boolean, error?: string, user?: User }
const result = await authStore.login({ login, password })
if (result.success) {
  // –£—Å–ø—ñ—Ö
} else {
  // –ü–æ–º–∏–ª–∫–∞: result.error
}
```

---

## –ü–æ—Ç—ñ–∫ –¥–∞–Ω–∏—Ö

```
Component (LoginView.vue)
    ‚Üì
useAuthStore.login()
    ‚Üì
useAuthActions.login() ‚Üí Apollo Client ‚Üí GraphQL API
    ‚Üì
useAuthStore:
  - –û–Ω–æ–≤–ª—é—î state (user, token)
  - –ó–±–µ—Ä—ñ–≥–∞—î —Ç–æ–∫–µ–Ω –≤ localStorage
  - –ü–æ–≤–µ—Ä—Ç–∞—î { success, error } –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
```

---

## Apollo Client –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### apolloClient.ts
- –°—Ç–≤–æ—Ä—é—î –µ–∫–∑–µ–º–ø–ª—è—Ä Apollo Client
- –ù–∞–ª–∞—à—Ç–æ–≤—É—î HTTP link
- –ù–∞–ª–∞—à—Ç–æ–≤—É—î auth link (–¥–æ–¥–∞—î Bearer token)
- –ù–∞–ª–∞—à—Ç–æ–≤—É—î cache

### main.ts
- –ù–∞–¥–∞—î Apollo Client —á–µ—Ä–µ–∑ `app.provide(DefaultApolloClient, apolloClient)`
- –¶–µ –¥–æ–∑–≤–æ–ª—è—î –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `useApolloClient()` –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- –î–ª—è composables –ø–æ–∑–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º Vue (—è–∫ —É Pinia store) –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø—Ä—è–º–∏–π —ñ–º–ø–æ—Ä—Ç

---

## –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

### useAuthActions
- –ë–∞–∑–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞: –≤–∏—Ç—è–≥—É—î message –∑ –ø–æ–º–∏–ª–∫–∏
- –õ–æ–≥—É—î –ø–æ–º–∏–ª–∫—É –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- –í–∏–∫–∏–¥–∞—î Error –∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º

### useAuthStore
- –î–µ—Ç–∞–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –¥–ª—è UI
- –§–æ—Ä–º–∞—Ç—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- –ü–æ–≤–µ—Ä—Ç–∞—î —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç `{ success, error }`

---

## –ü–µ—Ä–µ–≤–∞–≥–∏ —Ç–∞–∫–æ—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏

1. **–†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç–µ–π** - –∫–æ–∂–µ–Ω —à–∞—Ä –º–∞—î —á—ñ—Ç–∫—É —Ä–æ–ª—å
2. **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è** - –ª–µ–≥–∫–æ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –∫–æ–∂–µ–Ω —à–∞—Ä –æ–∫—Ä–µ–º–æ
3. **–ü–æ–≤—Ç–æ—Ä–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è** - useAuthActions –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤ —Ä—ñ–∑–Ω–∏—Ö –º—ñ—Å—Ü—è—Ö
4. **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞** - –∑–º—ñ–Ω–∏ –≤ API –Ω–µ –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ UI –ª–æ–≥—ñ–∫—É
5. **–ß–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å** - –∑—Ä–æ–∑—É–º—ñ–ª–æ, –¥–µ —â–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è
